<!-- âœ… SOLUCIÃ“N: Envolvemos todo en un *ngIf para asegurarnos de que `selectedObject` no es nulo -->
<div class="properties-panel-wrapper" *ngIf="selectedObject">

  <div class="panel-header">
    <div class="object-icon-header">
      <!-- Ahora es seguro acceder a selectedObject.type -->
      <span *ngIf="selectedObject.type === 'camera'">ğŸ“·</span>
      <!-- Agregamos mÃ¡s tipos para ser mÃ¡s robustos -->
      <span *ngIf="selectedObject.type.toLowerCase().includes('light')">ğŸ’¡</span>
      <!-- Por defecto para modelos y cubos -->
      <span *ngIf="selectedObject.type === 'model' || selectedObject.type === 'cube'">ğŸ§Š</span>
    </div>
    <input type="text" class="object-name-input" [(ngModel)]="editableObjectName" (blur)="onNameChange()">
    <button class="pin-btn" title="Fijar panel">ğŸ“Œ</button>
  </div>
  
  <div class="panel-content">
    <details class="properties-section" open>
      <summary class="section-header">
        <span class="arrow"></span>
        TransformaciÃ³n
      </summary>
      <div class="section-content">
        <!-- El binding al hijo ahora tambiÃ©n es seguro -->
        <app-transform-properties 
          [selectedObject]="selectedObject" 
          (transformChange)="onTransformChange($event)">
        </app-transform-properties>
      </div>
    </details>
  
    <!-- ... resto de las secciones adicionales ... -->
    <details class="properties-section">
      <summary class="section-header"><span class="arrow"></span>Relaciones</summary>
      <div class="section-content placeholder">(PrÃ³ximamente)</div>
    </details>
    <details class="properties-section">
      <summary class="section-header"><span class="arrow"></span>Colecciones</summary>
      <div class="section-content placeholder">(PrÃ³ximamente)</div>
    </details>
    <details class="properties-section">
      <summary class="section-header"><span class="arrow"></span>Instanciado</summary>
      <div class="section-content placeholder">(PrÃ³ximamente)</div>
    </details>
    <details class="properties-section">
      <summary class="section-header"><span class="arrow"></span>Trayectorias de movimiento</summary>
      <div class="section-content placeholder">(PrÃ³ximamente)</div>
    </details>
    <details class="properties-section">
      <summary class="section-header"><span class="arrow"></span>Visibilidad</summary>
      <div class="section-content placeholder">(PrÃ³ximamente)</div>
    </details>
    <details class="properties-section">
      <summary class="section-header"><span class="arrow"></span>Propiedades personalizadas</summary>
      <!-- âœ… CORRECCIÃ“N: Se cambiÃ³ "class." por "class=" -->
      <div class="section-content placeholder">(PrÃ³ximamente)</div>
    </details>
  </div>

</div>