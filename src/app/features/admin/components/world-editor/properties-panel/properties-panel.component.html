<!-- El contenedor principal solo se muestra si hay un objeto seleccionado -->
<div class="properties-panel-wrapper" *ngIf="selectedObject">

  <!-- ENCABEZADO: Nombre del objeto e ícono (se mantiene igual) -->
  <div class="panel-header">
    <div class="object-icon-header">
      <span *ngIf="selectedObject.type === 'camera'">📷</span>
      <span *ngIf="selectedObject.type.toLowerCase().includes('light')">💡</span>
      <span *ngIf="selectedObject.type === 'model' || selectedObject.type === 'cube'">🧊</span>
    </div>
    <input type="text" class="object-name-input" [(ngModel)]="editableObjectName" (blur)="onNameChange()">
    <button class="pin-btn" title="Fijar panel">📌</button>
  </div>
  
  <!-- CONTENIDO: Lista de secciones desplegables -->
  <div class="panel-content">
    
    <!-- Sección 1: Transformación (se mantiene igual) -->
    <details class="properties-section" open>
      <summary class="section-header">
        <span class="arrow"></span>
        Transformación
      </summary>
      <div class="section-content">
        <app-transform-properties 
          [selectedObject]="selectedObject" 
          (transformChange)="onTransformChange($event)">
        </app-transform-properties>
      </div>
    </details>

    <!-- Sección 2: Propiedades Personalizadas (AHORA USA EL NUEVO COMPONENTE) -->
    <details class="properties-section" open>
      <summary class="section-header">
        <span class="arrow"></span>
        Propiedades Personalizadas
      </summary>
      <div class="section-content">
          <!-- REEMPLAZADO: Toda la lógica de la lista se ha movido -->
          <app-custom-properties [selectedObject]="selectedObject"></app-custom-properties>
      </div>
    </details>
  
    <!-- Sección 3: Metadatos (AHORA USA EL NUEVO COMPONENTE) -->
    <details class="properties-section">
      <summary class="section-header">
        <span class="arrow"></span>
        Metadatos
      </summary>
      <div class="section-content">
           <!-- REEMPLAZADO: Toda la lógica de la lista se ha movido -->
           <app-metadata-properties [selectedObject]="selectedObject"></app-metadata-properties>
      </div>
    </details>
    
    <!-- Secciones adicionales (sin cambios) -->
    <details class="properties-section">
      <summary class="section-header"><span class="arrow"></span>Relaciones</summary>
      <div class="section-content placeholder">(Próximamente)</div>
    </details>
    
  </div>
</div>